var firebaseConfig = {apiKey: "AIzaSyBudIMeTFdzQ1HNSTOrGCfr3WnTa2y-Ij8",authDomain: "medtortest.firebaseapp.com",databaseURL: "https://medtortest.firebaseio.com",projectId: "medtortest",storageBucket: "medtortest.appspot.com",messagingSenderId: "423809348674",appId: "1:423809348674:web:0e1a0f78ffb4db0e59a9db",measurementId: "G-R464GQH3TF"};
firebase.initializeApp(firebaseConfig);var databaseRef = firebase.database().ref();var functions = firebase.functions();var emailIn = document.getElementById("emailInput");var feedbackIn = document.getElementById("feedbackInput");const scriptURL = 'https://script.google.com/macros/s/AKfycbxffWQ_Z3Qik5knWmZJ9Ulr6zQeGvCM_T-tMGcswGInxjo0PUZr/exec';var upperLogInBtn = document.getElementById("upperLogIn");const form = document.forms['getFeedback'];var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);if (iOS){var one = document.getElementById("labeler");one.style.left = "0px";one.style.bottom = "0px";var two = document.getElementById("labeler1");two.style.left = "0px";two.style.bottom = "165px";}firebase.auth().onAuthStateChanged(function(user) {if (user) {upperLogInBtn.innerHTML = "Log Out";upperLogInBtn.onclick = function(){logOut(event);};} else {}});
function checkFormatting(inputText){var mailformat = new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);if(inputText.match(mailformat)){if (checkEdu(inputText)) {return true;}else {return false;}}else{window.alert("Error: You have entered an invalid email address");return false;}}
function checkEdu(inputText) {if ((inputText.slice(-4)) == ".edu") {return true;}else if ((inputText.slice(-4)) == ".com") {return true;}else {alert("Error: Please use edu/com email");return false;}}form.addEventListener('submit', e => {e.preventDefault();emailText = emailIn.value;if (checkFormatting(emailText)){fetch(scriptURL, {method: 'POST', body: new FormData(form)}).then(response => window.location.href = 'medtorHome.html').catch(error => console.error('Error!', error.message))}})
function logOut(e) {e = e || window.event;e.preventDefault();localStorage.clear();firebase.auth().signOut().then(function() {window.location.href = "medtorHome.html";}).catch(function(error) {});}
